import{createElementBlock as d,openBlock as a,normalizeClass as r,Fragment as $,renderList as v,createVNode as o,withCtx as f,renderSlot as B,createElementVNode as h,createTextVNode as S,toDisplayString as g}from"vue";import V from"../../../plugins/popovers/UluPopover.vue.js";import k from"../../forms/UluSelectableMenu.vue.js";import p from"../../elements/UluIcon.vue.js";const A={__name:"UluFacetsFilterPopovers",props:{facets:{type:Array,default:()=>[]},classes:{type:Object,default:()=>({trigger:"button",triggerIcon:"button__icon"})},hideInputs:Boolean},emits:["facet-change"],setup(s,{emit:U}){const u=U,b=e=>e.multiple?e.children:[{label:`All ${e.name}s`,uid:""},...e.children],y=e=>e.multiple?e.children.filter(l=>l.selected).map(l=>l.uid):e.children.find(l=>l.selected)?.uid||"",m=e=>{const l=e.children.filter(c=>c.selected),t=l.length;return t===0?"All":e.multiple?t===1?l[0].label:`${t} selected`:l[0].label};function I(e,l,t){if(e.multiple){const c=new Set(l);e.children.forEach(n=>{const i=c.has(n.uid);n.selected!==i&&u("facet-change",{groupUid:e.uid,facetUid:n.uid,selected:i})})}else{const c=l;e.children.forEach(n=>{const i=n.uid===c;n.selected!==i&&u("facet-change",{groupUid:e.uid,facetUid:n.uid,selected:i})}),t()}}return(e,l)=>(a(),d("div",{class:r(s.classes.container)},[(a(!0),d($,null,v(s.facets,t=>(a(),d("div",{key:t.uid,class:r(s.classes.group)},[o(V,{classes:{trigger:s.classes.trigger,content:s.classes.content}},{trigger:f(()=>[B(e.$slots,"trigger",{group:t,label:m(t)},()=>[h("span",null,[S(g(t.name)+": ",1),h("strong",null,g(m(t)),1)])]),o(p,{class:r(s.classes.triggerIcon),icon:"fas fa-chevron-down"},null,8,["class"])]),default:f(({close:c})=>[o(k,{legend:t.name,type:t.multiple?"checkbox":"radio",options:b(t),"model-value":y(t),"onUpdate:modelValue":n=>I(t,n,c),hideInputs:s.hideInputs},null,8,["legend","type","options","model-value","onUpdate:modelValue","hideInputs"])]),_:2},1032,["classes"])],2))),128))],2))}};export{A as default};
