import F from"./UluTableStickyRows.vue.js";import{resolveComponent as W,createElementBlock as i,openBlock as r,normalizeClass as f,createCommentVNode as C,createElementVNode as _,toDisplayString as k,Fragment as h,renderList as g,normalizeStyle as b,createBlock as B,resolveDynamicComponent as V,withCtx as v,renderSlot as A,createTextVNode as w,createVNode as T,createSlots as m,normalizeProps as R,guardReactiveProps as S}from"vue";import L from"../../../_virtual/_plugin-vue_export-helper.js";const U={name:"UluTableStickyTable",components:{UluTableStickyRows:F},props:{resolveClasses:Function,classes:{type:Object,default:()=>({})},caption:String,idPrefix:String,headerRows:{type:Array,required:!0},rows:Array,footerRows:Array,rowColumns:Array,isActual:{type:Boolean},columnWidth:{type:String},getRowValue:{type:Function,default:({row:s,column:a})=>s[a.key]},getColumnTitle:{type:Function,default:({column:s})=>s.title}},data(){return{headerRefs:{}}},methods:{handleSortFocus(s,a){this.isActual&&(s.sortFocused=a)},addHeaderRef(s,a){const{headerRefs:e,isActual:n}=this;if(!n||!a)return;const{id:u}=s,l=e[u];l&&this.$emit("actual-header-removed",l),this.$emit("actual-header-added",a),e[u]=a},optionalAttr(s){return s||null},value({row:s,column:a,rowIndex:e}){const n=a.value;return n?n({row:s.data,column:a,rowIndex:e}):this.getRowValue({row:s.data,column:a,rowIndex:e})},getCellHeaders(s,a){const e=s.headers.join(" "),n=s.getRowHeaders(a),u=n.length?" ":"";return`${e}${u}${n}`},getHeaderHeaders(s){const a=s.headers.filter(e=>e!==s.id);if(a.length)return a.join(" ")}}},M=["aria-hidden"],N={key:0,class:"table-sticky__caption"},j=["id"],z=["id","rowspan","colspan","data-child-columns","aria-sort","scope","headers"],P=["innerHTML"],D={class:"table-sticky__sort-icon","aria-hidden":"true"},E={class:"table-sticky__sort-icon-inner"},q=["innerHTML"],O={key:1},G={key:2};function J(s,a,e,n,u,l){const H=W("UluTableStickyRows");return r(),i("table",{class:f(e.resolveClasses(e.classes.table,{isActual:e.isActual})),"aria-hidden":e.isActual?"false":"true"},[e.caption?(r(),i("caption",N,k(e.caption),1)):C("",!0),_("thead",null,[(r(!0),i(h,null,g(e.headerRows,(c,o)=>(r(),i("tr",{key:`hr-${o}`,id:l.optionalAttr(e.isActual&&c.id),class:f(e.resolveClasses(e.classes.rowHeader,{row:c,rowIndex:o,isActual:e.isActual})),style:b({height:c.height})},[(r(!0),i(h,null,g(c.columns,(t,d)=>(r(),i("th",{key:`hc-${d}`,id:l.optionalAttr(e.isActual&&t.id),rowspan:t.rowspan,colspan:t.colspan,"data-child-columns":t.columns&&t.columns.length,class:f([{"sort-active":t.sortApplied,"sort-ascending":t.sortApplied&&t.sortAscending,"sort-descending":t.sortApplied&&!t.sortAscending},e.resolveClasses(t.classHeader,{column:t,index:d,isActual:e.isActual})]),style:b({width:t.width}),"aria-sort":t.sort?t.sortAscending?"ascending":"descending":null,scope:l.optionalAttr(e.isActual&&(t.colspan>1?"colgroup":"col")),headers:l.optionalAttr(e.isActual&&l.getHeaderHeaders(t,o)),ref_for:!0,ref:y=>l.addHeaderRef(t,y)},[t.sortable?(r(),B(V(e.isActual?"button":"div"),{key:0,class:f(["table-sticky__sort-button",{"table-sticky__sort-button--focused":t.sortFocused}]),onClick:y=>s.$emit("column-sorted",t),onFocus:y=>l.handleSortFocus(t,!0),onBlur:y=>l.handleSortFocus(t,!1),"aria-pressed":t.sortApplied?"true":"false"},{default:v(()=>[s.$slots[t.slotHeader]?A(s.$slots,t.slotHeader,{key:0,isActual:e.isActual,column:t,index:d}):t.htmlTitle?(r(),i("div",{key:1,innerHTML:e.getColumnTitle({column:t,index:d,isActual:e.isActual})},null,8,P)):(r(),i(h,{key:2},[w(k(e.getColumnTitle({column:t,index:d,isActual:e.isActual})),1)],64)),_("span",D,[_("span",E,[A(s.$slots,"sortIcon",{},()=>[a[0]||(a[0]=w("â–¼",-1))])])])]),_:2},1064,["class","onClick","onFocus","onBlur","aria-pressed"])):(r(),i(h,{key:1},[s.$slots[t.slotHeader]?A(s.$slots,t.slotHeader,{key:0,isActual:e.isActual,column:t,index:d}):t.htmlTitle?(r(),i("div",{key:1,innerHTML:e.getColumnTitle({column:t,index:d,isActual:e.isActual})},null,8,q)):(r(),i(h,{key:2},[w(k(e.getColumnTitle({column:t,index:d,isActual:e.isActual})),1)],64))],64))],14,z))),128))],14,j))),128))]),e.rows?(r(),i("tbody",O,[T(H,{rows:e.rows,rowColumns:e.rowColumns,optionalAttr:l.optionalAttr,resolveClasses:e.resolveClasses,getCellHeaders:l.getCellHeaders,isActual:e.isActual,columnWidth:e.columnWidth,classes:e.classes,value:l.value},m({_:2},[g(s.$slots,(c,o)=>({name:o,fn:v(t=>[A(s.$slots,o,R(S(t)))])}))]),1032,["rows","rowColumns","optionalAttr","resolveClasses","getCellHeaders","isActual","columnWidth","classes","value"])])):C("",!0),e.footerRows?(r(),i("tfoot",G,[T(H,{rows:e.footerRows,rowColumns:e.rowColumns,optionalAttr:l.optionalAttr,resolveClasses:e.resolveClasses,getCellHeaders:l.getCellHeaders,isActual:e.isActual,columnWidth:e.columnWidth,classes:e.classes,value:l.value,foot:""},m({_:2},[g(s.$slots,(c,o)=>({name:o,fn:v(t=>[A(s.$slots,o,R(S(t)))])}))]),1032,["rows","rowColumns","optionalAttr","resolveClasses","getCellHeaders","isActual","columnWidth","classes","value"])])):C("",!0)],10,M)}const Y=L(U,[["render",J]]);export{Y as default};
