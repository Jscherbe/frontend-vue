import{useSlots as N,ref as f,computed as r,createBlock as k,openBlock as a,resolveDynamicComponent as B,normalizeStyle as R,normalizeClass as h,unref as n,withCtx as S,createElementVNode as C,createElementBlock as m,createCommentVNode as y,renderSlot as i,createTextVNode as x,toDisplayString as b}from"vue";import{RouterLink as P}from"vue-router";import{useModifiers as V}from"../../composables/useModifiers.js";import{refToElement as I}from"../../utils/dom.js";const q={class:"card__body"},L={class:"card__main"},F=["href","target"],G={key:0,class:"card__aside"},J=["src","alt"],K={key:1,class:"card__footer"},Z={__name:"UluCard",props:{cardElement:{type:String,default:"article"},title:String,titleElement:{type:String,default:"h3"},titleTo:[String,Object],titleHref:String,titleTarget:String,to:[String,Object],href:String,target:String,classes:{type:Object,default:()=>({})},proxyClick:Boolean,proxyClickOptions:{type:Object,default:()=>({})},imageSrc:String,imageAlt:String,imageIcon:Boolean,horizontal:Boolean,horizontalCenter:Boolean,overlay:Boolean,modifiers:[Array,String]},emits:["proxy-click"],setup(e,{emit:$}){const t=e,O=$,s=N();t.proxyClick&&(t.to||t.href)&&console.warn("UluCard: 'proxyClick' is ignored when 'to' or 'href' are present."),(t.titleTo||t.titleHref)&&(t.to||t.href)&&console.warn("UluCard: 'titleTo'/'titleHref' should not be used with 'to'/'href'.");const T=f(null),v=f(null),{resolvedModifiers:H}=V({props:t,baseClass:"card"}),E=f(null),c=f(!1),u=r(()=>t.proxyClick&&!t.to&&!t.href),w=r(()=>u.value&&(t.titleTo||t.titleHref)),M=r(()=>u.value&&!w.value),g=r(()=>u.value||null),z=r(()=>({selectorPrevent:"input, select, textarea, button, a, [tabindex='-1']",mousedownDurationPrevent:250,...t.proxyClickOptions})),j=r(()=>u.value?"pointer":null),D=r(()=>t.to?P:t.href?"a":t.cardElement);function U({target:l,timeStamp:d}){if(!g.value)return;const{selectorPrevent:o}=z.value;c.value=!1,l.closest(o)||(c.value=!0,E.value=d)}function A({timeStamp:l}){if(!g.value||!c.value)return;const{mousedownDurationPrevent:d}=z.value;if(l-E.value<d){if(w.value){const o=I(v.value);o?o.click():console.warn("Unable to resolve title link ref")}else if(M.value){const o=T.value?.querySelector("[data-ulu-card-proxy-target]");o?o.click():O("proxy-click")}}c.value=!1}return(l,d)=>(a(),k(B(D.value),{ref_key:"cardRoot",ref:T,class:h(["card",[{"card--horizontal":e.horizontal||e.horizontalCenter,"card--horizontal-center":e.horizontalCenter,"card--overlay":e.overlay},n(H)]]),onMousedown:U,onMouseup:A,style:R({cursor:j.value}),target:e.target,to:e.to,href:e.href,"data-ulu-proxy-click-init":g.value},{default:S(()=>[C("div",q,[C("div",L,[e.title||n(s).title?(a(),k(B(e.titleElement),{key:0,class:h(["card__title",e.classes.title])},{default:S(()=>[e.titleTo?(a(),k(n(P),{key:0,class:"card__title-link",to:e.titleTo,ref_key:"link",ref:v},{default:S(()=>[i(l.$slots,"title",{},()=>[x(b(e.title),1)])]),_:3},8,["to"])):e.titleHref?(a(),m("a",{key:1,class:"card__title-link",href:e.titleHref,target:e.titleTarget,ref_key:"link",ref:v},[i(l.$slots,"title",{},()=>[x(b(e.title),1)])],8,F)):i(l.$slots,"title",{key:2},()=>[x(b(e.title),1)])]),_:3},8,["class"])):y("",!0),i(l.$slots,"body")]),n(s).aside?(a(),m("div",G,[i(l.$slots,"aside")])):y("",!0)]),n(s).image||e.imageSrc?(a(),m("div",{key:0,class:h(["card__image",[{"card__image--icon":e.imageIcon},e.classes.image]])},[i(l.$slots,"image",{},()=>[C("img",{src:e.imageSrc,alt:e.imageAlt},null,8,J)])],2)):y("",!0),n(s).footer?(a(),m("div",K,[i(l.$slots,"footer")])):y("",!0)]),_:3},40,["class","style","target","to","href","data-ulu-proxy-click-init"]))}};export{Z as default};
