import{a as $,e as U,o as P,w as E,r as X,a2 as Y,O as k,f as Z,v as ee,q as te}from"./iframe-CSRVEcn3.js";import"./preload-helper-BJwshlQW.js";const M={__name:"UluConditionalWrapper",props:{is:{type:[String,Object,Function],default:"div"},unwrapped:{type:Boolean,default:!1}},setup(e){return(t,n)=>e.unwrapped?U(t.$slots,"default",{key:1}):(P(),$(X(e.is),{key:0},{default:E(()=>[U(t.$slots,"default")]),_:3}))}};M.__docgenInfo={exportName:"default",displayName:"UluConditionalWrapper",description:"",tags:{},props:[{name:"is",description:`The underlying component or HTML tag to render.
Can be a string like 'div' or an imported component object.`,type:{name:"string|object|func"},defaultValue:{func:!1,value:"'div'"}},{name:"unwrapped",description:`If true, the wrapper will not be rendered and the content
will be output directly.`,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],slots:[{name:"default"}],sourceFiles:["/Users/joescherben/Personal/Projects/ULU/frontend-vue/lib/components/utils/UluConditionalWrapper.vue"]};function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?W(Object(n),!0).forEach(function(r){ne(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ne(e,t,n){return(t=re(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function re(e){var t=oe(e,"string");return typeof t=="symbol"?t:t+""}function oe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function N(e){return e._type==="span"&&"text"in e&&typeof e.text=="string"&&(typeof e.marks>"u"||Array.isArray(e.marks)&&e.marks.every(t=>typeof t=="string"))}function R(e){return typeof e._type=="string"&&e._type[0]!=="@"&&(!("markDefs"in e)||!e.markDefs||Array.isArray(e.markDefs)&&e.markDefs.every(t=>typeof t._key=="string"))&&"children"in e&&Array.isArray(e.children)&&e.children.every(t=>typeof t=="object"&&"_type"in t)}function V(e){return R(e)&&"listItem"in e&&typeof e.listItem=="string"&&(typeof e.level>"u"||typeof e.level=="number")}function K(e){return e._type==="@list"}function q(e){return e._type==="@span"}function F(e){return e._type==="@text"}const D=["strong","em","code","underline","strike-through"];function ie(e,t,n){if(!N(e)||!e.marks)return[];if(!e.marks.length)return[];const r=e.marks.slice(),l={};return r.forEach(o=>{l[o]=1;for(let u=t+1;u<n.length;u++){const c=n[u];if(c&&N(c)&&Array.isArray(c.marks)&&c.marks.indexOf(o)!==-1)l[o]++;else break}}),r.sort((o,u)=>se(l,o,u))}function se(e,t,n){const r=e[t],l=e[n];if(r!==l)return l-r;const o=D.indexOf(t),u=D.indexOf(n);return o!==u?o-u:t.localeCompare(n)}function le(e){var t,n;const{children:r}=e,l=(t=e.markDefs)!=null?t:[];if(!r||!r.length)return[];const o=r.map(ie),u={_type:"@span",children:[],markType:"<unknown>"};let c=[u];for(let b=0;b<r.length;b++){const v=r[b];if(!v)continue;const g=o[b]||[];let i=1;if(c.length>1)for(i;i<c.length;i++){const a=((n=c[i])==null?void 0:n.markKey)||"",p=g.indexOf(a);if(p===-1)break;g.splice(p,1)}c=c.slice(0,i);let s=c[c.length-1];if(s){for(const a of g){const p=l?.find(f=>f._key===a),d=p?p._type:a,y={_type:"@span",_key:v._key,children:[],markDef:p,markType:d,markKey:a};s.children.push(y),c.push(y),s=y}if(N(v)){const a=v.text.split(`
`);for(let p=a.length;p-- >1;)a.splice(p,0,`
`);s.children=s.children.concat(a.map(p=>({_type:"@text",text:p})))}else s.children=s.children.concat(v)}}return u.children}function ae(e,t){const n=[];let r;for(let l=0;l<e.length;l++){const o=e[l];if(o){if(!V(o)){n.push(o),r=void 0;continue}if(!r){r=I(o,l,t),n.push(r);continue}if(ce(o,r)){r.children.push(o);continue}if((o.level||1)>r.level){const u=I(o,l,t);if(t==="html"){const c=r.children[r.children.length-1],b=C(C({},c),{},{children:[...c.children,u]});r.children[r.children.length-1]=b}else r.children.push(u);r=u;continue}if((o.level||1)<r.level){const u=n[n.length-1],c=u&&S(u,o);if(c){r=c,r.children.push(o);continue}r=I(o,l,t),n.push(r);continue}if(o.listItem!==r.listItem){const u=n[n.length-1],c=u&&S(u,{level:o.level||1});if(c&&c.listItem===o.listItem){r=c,r.children.push(o);continue}else{r=I(o,l,t),n.push(r);continue}}console.warn("Unknown state encountered for block",o),n.push(o)}}return n}function ce(e,t){return(e.level||1)===t.level&&e.listItem===t.listItem}function I(e,t,n){return{_type:"@list",_key:`${e._key||`${t}`}-parent`,mode:n,level:e.level||1,listItem:e.listItem,children:[e]}}function S(e,t){const n=t.level||1,r=t.listItem||"normal",l=typeof t.listItem=="string";if(K(e)&&(e.level||1)===n&&l&&(e.listItem||"normal")===r)return e;if(!("children"in e))return;const o=e.children[e.children.length-1];return o&&!N(o)?S(o,t):void 0}function H(e){let t="";return e.children.forEach(n=>{F(n)?t+=n.text:q(n)&&(t+=H(n))}),t}const ue="html";function pe(e,t){const{block:n,list:r,listItem:l,marks:o,types:u,...c}=t;return{...e,block:x(e,t,"block"),list:x(e,t,"list"),listItem:x(e,t,"listItem"),marks:x(e,t,"marks"),types:x(e,t,"types"),...c}}function x(e,t,n){const r=t[n],l=e[n];return typeof r=="function"||r&&typeof l=="function"?r:r?{...l,...r}:l}const m=e=>(t,{slots:n})=>{var r;return k(e,(r=n.default)==null?void 0:r.call(n))},de=({value:e},{slots:t})=>{var n;return k("a",{href:e?.href},(n=t.default)==null?void 0:n.call(t))},ye={textDecoration:"underline"},fe={code:m("code"),em:m("em"),link:de,"strike-through":m("del"),strong:m("strong"),underline:(e,{slots:t})=>{var n;return k("span",{style:ye},(n=t.default)==null?void 0:n.call(t))}},me={number:m("ol"),bullet:m("ul")},ke=m("li"),w=(e,t)=>`[@portabletext/vue] Unknown ${e}, specify a component for it in the \`components.${t}\` prop`,z=e=>w(`block type "${e}"`,"types"),he=e=>w(`mark type "${e}"`,"marks"),be=e=>w(`block style "${e}"`,"block"),ve=e=>w(`list style "${e}"`,"list"),ge=e=>w(`list item style "${e}"`,"listItem");function _e(e){console.warn(e)}const A={display:"none"},xe=({value:e,isInline:t})=>{const n=z(e._type);return t?k("span",{style:A},n):k("div",{style:A},n)},we=({markType:e},{slots:t})=>{var n;return k("span",{class:`unknown__pt__mark__${e}`},(n=t.default)==null?void 0:n.call(t))},Ie=m("p"),Oe=m("ul"),Te=m("li"),je=()=>k("br"),Ne={normal:m("p"),blockquote:m("blockquote"),h1:m("h1"),h2:m("h2"),h3:m("h3"),h4:m("h4"),h5:m("h5"),h6:m("h6")},B={types:{},block:Ne,marks:fe,list:me,listItem:ke,hardBreak:je,unknownType:xe,unknownMark:we,unknownList:Oe,unknownListItem:Te,unknownBlockStyle:Ie},Se=(e,t)=>{function n(i){const{node:s,index:a,isInline:p}=i,d=s._key||`node-${a}`;return K(s)?o(s,a,d):V(s)?l(s,a,d):q(s)?u(s,a,d):r(s)?g(s,a,d,p):R(s)?c(s,a,d,p):F(s)?b(s,d):v(s,a,d,p)}function r(i){return i._type in e.types}function l(i,s,a){const p=L({node:i,index:s,isInline:!1,renderNode:n}),d=e.listItem,y=(typeof d=="function"?d:d[i.listItem])||e.unknownListItem;if(y===e.unknownListItem){const h=i.listItem||"bullet";t(ge(h),{type:h,nodeType:"listItemStyle"})}let f=p.children;if(i.style&&i.style!=="normal"){const{listItem:h,..._}=i;f=n({node:_,index:s,isInline:!1})}return k(y,{key:a,value:i,index:s,isInline:!1,renderNode:n},()=>f)}function o(i,s,a){const p=i.children.map((f,h)=>n({node:f._key?f:{...f,_key:`li-${s}-${h}`},index:h,isInline:!1})),d=e.list,y=(typeof d=="function"?d:d[i.listItem])||e.unknownList;if(y===e.unknownList){const f=i.listItem||"bullet";t(ve(f),{nodeType:"listStyle",type:f})}return k(y,{key:a,value:i,index:s,isInline:!1,renderNode:n},()=>p)}function u(i,s,a){const{markDef:p,markType:d,markKey:y}=i,f=e.marks[d]||e.unknownMark,h=i.children.map((_,Q)=>n({node:_,index:Q,isInline:!0}));return f===e.unknownMark&&t(he(d),{nodeType:"mark",type:d}),k(f,{key:a,text:H(i),value:p,markType:d,markKey:y,renderNode:n},()=>h)}function c(i,s,a,p){const{_key:d,children:y,...f}=L({node:i,index:s,isInline:p,renderNode:n}),h=f.node.style||"normal",_=(typeof e.block=="function"?e.block:e.block[h])||e.unknownBlockStyle;return _===e.unknownBlockStyle&&t(be(h),{nodeType:"blockStyle",type:h}),k(_,{key:a,...f,value:f.node,renderNode:n},()=>y)}function b(i,s){if(i.text===`
`){const a=e.hardBreak;return a?k(a,{key:s}):`
`}return i.text}function v(i,s,a,p){const d={value:i,isInline:p,index:s,renderNode:n};t(z(i._type),{nodeType:"block",type:i._type});const y=e.unknownType;return k(y,{key:a,...d})}function g(i,s,a,p){const d={value:i,isInline:p,index:s,renderNode:n},y=e.types[i._type];return y?k(y,{key:a,...d}):void 0}return n};function L(e){const{node:t,index:n,isInline:r,renderNode:l}=e,o=le(t).map((u,c)=>l({node:u,isInline:!0,index:c,renderNode:l}));return{_key:t._key||`block-${n}`,children:o,index:n,isInline:r,node:t}}const $e=Y({__name:"vue-portable-text",props:{value:{},components:{},onMissingComponent:{type:[Function,Boolean],default:()=>_e},listNestingMode:{}},setup(e){function t(){}const n=e,r=()=>{const l=n.onMissingComponent||t,o=Array.isArray(n.value)?n.value:[n.value],u=ae(o,n.listNestingMode||ue),c=n.components?pe(B,n.components):B,b=Se(c,l);return u.map((v,g)=>b({node:v,index:g,isInline:!1,renderNode:b}))};return(l,o)=>(P(),$(r))}}),G={__name:"UluSanityRichText",props:{content:Array,noWrapper:{type:Boolean,default:!1}},setup(e){const t={types:{image:({value:n})=>k("img",{src:`${n.imageUrl}?max-w=1100&fit=crop`,alt:n.imageAlt})}};return(n,r)=>e.content?.length?(P(),$(M,{key:0,class:"wysiwyg",unwrapped:e.noWrapper},{default:E(()=>[ee(te($e),{value:e.content,components:t},null,8,["value"])]),_:1},8,["unwrapped"])):Z("",!0)}};G.__docgenInfo={exportName:"default",displayName:"UluSanityRichText",description:"",tags:{},props:[{name:"content",description:"The array of Portable Text blocks to render.",type:{name:"array"}},{name:"noWrapper",description:"If true, the output will not be wrapped in a div with the 'wysiwyg' class.",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],sourceFiles:["/Users/joescherben/Personal/Projects/ULU/frontend-vue/lib/components/utils/UluSanityRichText.vue"]};const We={component:G,tags:["autodocs"],argTypes:{content:{control:"object"},noWrapper:{control:"boolean"}}},J=[{_key:"r1",_type:"block",style:"h2",children:[{_key:"r1c1",_type:"span",text:"Hello, Sanity!"}]},{_key:"r2",_type:"block",children:[{_key:"r2c1",_type:"span",text:"This is a simple example of Portable Text being rendered by the "},{_key:"r2c2",_type:"span",text:"UluSanityRichText",marks:["strong"]},{_key:"r2c3",_type:"span",text:" component."}]}],O={args:{content:J,noWrapper:!1}},T={args:{content:J,noWrapper:!0}},j={args:{content:[]}};O.parameters={...O.parameters,docs:{...O.parameters?.docs,source:{originalSource:`{
  args: {
    content: mockContent,
    noWrapper: false
  }
}`,...O.parameters?.docs?.source}}};T.parameters={...T.parameters,docs:{...T.parameters?.docs,source:{originalSource:`{
  args: {
    content: mockContent,
    noWrapper: true
  }
}`,...T.parameters?.docs?.source}}};j.parameters={...j.parameters,docs:{...j.parameters?.docs,source:{originalSource:`{
  args: {
    content: []
  }
}`,...j.parameters?.docs?.source}}};const Ce=["WithWrapper","NoWrapper","Empty"];export{j as Empty,T as NoWrapper,O as WithWrapper,Ce as __namedExportsOrder,We as default};
