function m(t,e){let n=(t?.meta||{}).title;return typeof n=="function"&&(n=n(e||t)),n}function j(t,e){const n=Object.assign({},{qualifier(s,a){return a?b(s):x(s)},sort:p,item:{},includeChildren:!1},e),c=(s,a)=>a?`${a}/${s.path}`:s.path,i=(s,a=null)=>s.filter(l=>n.qualifier(l,a)).map(l=>{const u=l.children?g(l.children):l,f=l.children?l.children.filter(d=>d.path!==""):!1,o=h(u,c(l,a),n.item);return n.includeChildren&&f.length&&(o.children=i(f,o.path)),o}).sort(n.sort);return i(t)}function w(t){function e(r){const n=[];for(const c of r){const i={...c};delete i.children,n.push(i),c.children&&n.push(...e(c.children))}return n}return e(t)}function O(t,e,r){const c=Object.assign({},{includeIndex:!1,item:{},sort:p},r),i=t.find(u=>u.path!=="/"&&e.includes(u.path)),s=(u,f,o)=>{if(u.children){const d=u.children.find($=>$.path.includes(e));if(d)return s(d,u,o+d.path)}return{route:f,path:o}},{route:a,path:l}=s(i,i,i.path);return a.children?a.children.filter(I(c.includeIndex)).map(u=>h(u,`${l}/${u.path}`,c.item)).sort(c.sort):(console.warn("Unable to build menu for:",e),[])}function g(t){return t.find(e=>e.path==="")}function h(t,e=t.path,r){const c=Object.assign({},{indexMeta:!0,modify:null},r);let i=Object.assign({},t.meta);c.indexMeta&&t.children&&(i=Object.assign({},i,g(t.children)?.meta));const s={...t,meta:i},a={path:e,title:m(s,t)||"Missing Title",weight:i?.weight||0,meta:i};return c.modify&&c.modify(a,t),a}function b(t){return!t.path.includes("/:")}function x(t){const e=t.path.match(/\//g)||[];return b(t)&&e.length===1}function y(t,e){const{target:r}=e,n=r.closest("a");if(n){let c=n.getAttribute("href");c.startsWith("/")&&(t.push(c),e.preventDefault())}}function R(t,e=M(t)){return e?.children}function M(t,e){const r=t.matched.length,n=r-2;return e?r>1?t.matched[0]:null:n<0?null:t.matched[n]}function I(t){return e=>t||e.path!==""}function p(t,e){return t?.weight-e?.weight}function S(t,e){const n=Object.assign({},{parent:null,includeIndex:!1,item:{},sort:p},e),c=n.parent||M(t);return(R(t,c)||[]).filter(I(n.includeIndex)).map(s=>h(s,`${c.path}/${s.path}`,n.item)).sort(n.sort)}function B(t){const{matched:e,path:r}=t;let n;return e.reduce((i,s,a)=>{if(s.meta?.breadcrumb===!1||s.path===n)return i;const l=a===e.length-1,u=m(s,t)||"Missing Title";return i.push({title:u,to:{path:l?r:s.path},current:l}),n=s.path,i},[])}export{M as $,O as a,b,j as c,S as d,B as e,w as f,m as g,x as i,y as n};
