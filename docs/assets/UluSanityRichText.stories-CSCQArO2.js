import{a3 as H,a as C,o as B,P as k,f as J,w as Q,v as X,q as Y}from"./iframe-Dmbn_XAG.js";import{_ as Z}from"./UluConditionalWrapper-Be8aFcO7.js";import"./preload-helper-BJwshlQW.js";function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?j(Object(n),!0).forEach(function(r){ee(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ee(e,t,n){return(t=te(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function te(e){var t=ne(e,"string");return typeof t=="symbol"?t:t+""}function ne(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function S(e){return e._type==="span"&&"text"in e&&typeof e.text=="string"&&(typeof e.marks>"u"||Array.isArray(e.marks)&&e.marks.every(t=>typeof t=="string"))}function E(e){return typeof e._type=="string"&&e._type[0]!=="@"&&(!("markDefs"in e)||!e.markDefs||Array.isArray(e.markDefs)&&e.markDefs.every(t=>typeof t._key=="string"))&&"children"in e&&Array.isArray(e.children)&&e.children.every(t=>typeof t=="object"&&"_type"in t)}function L(e){return E(e)&&"listItem"in e&&typeof e.listItem=="string"&&(typeof e.level>"u"||typeof e.level=="number")}function M(e){return e._type==="@list"}function R(e){return e._type==="@span"}function K(e){return e._type==="@text"}const W=["strong","em","code","underline","strike-through"];function re(e,t,n){if(!S(e)||!e.marks)return[];if(!e.marks.length)return[];const r=e.marks.slice(),l={};return r.forEach(o=>{l[o]=1;for(let u=t+1;u<n.length;u++){const a=n[u];if(a&&S(a)&&Array.isArray(a.marks)&&a.marks.indexOf(o)!==-1)l[o]++;else break}}),r.sort((o,u)=>oe(l,o,u))}function oe(e,t,n){const r=e[t],l=e[n];if(r!==l)return l-r;const o=W.indexOf(t),u=W.indexOf(n);return o!==u?o-u:t.localeCompare(n)}function ie(e){var t,n;const{children:r}=e,l=(t=e.markDefs)!=null?t:[];if(!r||!r.length)return[];const o=r.map(re),u={_type:"@span",children:[],markType:"<unknown>"};let a=[u];for(let b=0;b<r.length;b++){const v=r[b];if(!v)continue;const g=o[b]||[];let i=1;if(a.length>1)for(i;i<a.length;i++){const c=((n=a[i])==null?void 0:n.markKey)||"",p=g.indexOf(c);if(p===-1)break;g.splice(p,1)}a=a.slice(0,i);let s=a[a.length-1];if(s){for(const c of g){const p=l?.find(f=>f._key===c),y=p?p._type:c,d={_type:"@span",_key:v._key,children:[],markDef:p,markType:y,markKey:c};s.children.push(d),a.push(d),s=d}if(S(v)){const c=v.text.split(`
`);for(let p=c.length;p-- >1;)c.splice(p,0,`
`);s.children=s.children.concat(c.map(p=>({_type:"@text",text:p})))}else s.children=s.children.concat(v)}}return u.children}function se(e,t){const n=[];let r;for(let l=0;l<e.length;l++){const o=e[l];if(o){if(!L(o)){n.push(o),r=void 0;continue}if(!r){r=w(o,l,t),n.push(r);continue}if(le(o,r)){r.children.push(o);continue}if((o.level||1)>r.level){const u=w(o,l,t);if(t==="html"){const a=r.children[r.children.length-1],b=P(P({},a),{},{children:[...a.children,u]});r.children[r.children.length-1]=b}else r.children.push(u);r=u;continue}if((o.level||1)<r.level){const u=n[n.length-1],a=u&&$(u,o);if(a){r=a,r.children.push(o);continue}r=w(o,l,t),n.push(r);continue}if(o.listItem!==r.listItem){const u=n[n.length-1],a=u&&$(u,{level:o.level||1});if(a&&a.listItem===o.listItem){r=a,r.children.push(o);continue}else{r=w(o,l,t),n.push(r);continue}}console.warn("Unknown state encountered for block",o),n.push(o)}}return n}function le(e,t){return(e.level||1)===t.level&&e.listItem===t.listItem}function w(e,t,n){return{_type:"@list",_key:`${e._key||`${t}`}-parent`,mode:n,level:e.level||1,listItem:e.listItem,children:[e]}}function $(e,t){const n=t.level||1,r=t.listItem||"normal",l=typeof t.listItem=="string";if(M(e)&&(e.level||1)===n&&l&&(e.listItem||"normal")===r)return e;if(!("children"in e))return;const o=e.children[e.children.length-1];return o&&!S(o)?$(o,t):void 0}function q(e){let t="";return e.children.forEach(n=>{K(n)?t+=n.text:R(n)&&(t+=q(n))}),t}const ce="html";function ae(e,t){const{block:n,list:r,listItem:l,marks:o,types:u,...a}=t;return{...e,block:x(e,t,"block"),list:x(e,t,"list"),listItem:x(e,t,"listItem"),marks:x(e,t,"marks"),types:x(e,t,"types"),...a}}function x(e,t,n){const r=t[n],l=e[n];return typeof r=="function"||r&&typeof l=="function"?r:r?{...l,...r}:l}const m=e=>(t,{slots:n})=>{var r;return k(e,(r=n.default)==null?void 0:r.call(n))},ue=({value:e},{slots:t})=>{var n;return k("a",{href:e?.href},(n=t.default)==null?void 0:n.call(t))},pe={textDecoration:"underline"},ye={code:m("code"),em:m("em"),link:ue,"strike-through":m("del"),strong:m("strong"),underline:(e,{slots:t})=>{var n;return k("span",{style:pe},(n=t.default)==null?void 0:n.call(t))}},de={number:m("ol"),bullet:m("ul")},fe=m("li"),I=(e,t)=>`[@portabletext/vue] Unknown ${e}, specify a component for it in the \`components.${t}\` prop`,V=e=>I(`block type "${e}"`,"types"),me=e=>I(`mark type "${e}"`,"marks"),ke=e=>I(`block style "${e}"`,"block"),he=e=>I(`list style "${e}"`,"list"),be=e=>I(`list item style "${e}"`,"listItem");function ve(e){console.warn(e)}const A={display:"none"},ge=({value:e,isInline:t})=>{const n=V(e._type);return t?k("span",{style:A},n):k("div",{style:A},n)},_e=({markType:e},{slots:t})=>{var n;return k("span",{class:`unknown__pt__mark__${e}`},(n=t.default)==null?void 0:n.call(t))},xe=m("p"),Ie=m("ul"),we=m("li"),Oe=()=>k("br"),Te={normal:m("p"),blockquote:m("blockquote"),h1:m("h1"),h2:m("h2"),h3:m("h3"),h4:m("h4"),h5:m("h5"),h6:m("h6")},D={types:{},block:Te,marks:ye,list:de,listItem:fe,hardBreak:Oe,unknownType:ge,unknownMark:_e,unknownList:Ie,unknownListItem:we,unknownBlockStyle:xe},Ne=(e,t)=>{function n(i){const{node:s,index:c,isInline:p}=i,y=s._key||`node-${c}`;return M(s)?o(s,c,y):L(s)?l(s,c,y):R(s)?u(s,c,y):r(s)?g(s,c,y,p):E(s)?a(s,c,y,p):K(s)?b(s,y):v(s,c,y,p)}function r(i){return i._type in e.types}function l(i,s,c){const p=U({node:i,index:s,isInline:!1,renderNode:n}),y=e.listItem,d=(typeof y=="function"?y:y[i.listItem])||e.unknownListItem;if(d===e.unknownListItem){const h=i.listItem||"bullet";t(be(h),{type:h,nodeType:"listItemStyle"})}let f=p.children;if(i.style&&i.style!=="normal"){const{listItem:h,..._}=i;f=n({node:_,index:s,isInline:!1})}return k(d,{key:c,value:i,index:s,isInline:!1,renderNode:n},()=>f)}function o(i,s,c){const p=i.children.map((f,h)=>n({node:f._key?f:{...f,_key:`li-${s}-${h}`},index:h,isInline:!1})),y=e.list,d=(typeof y=="function"?y:y[i.listItem])||e.unknownList;if(d===e.unknownList){const f=i.listItem||"bullet";t(he(f),{nodeType:"listStyle",type:f})}return k(d,{key:c,value:i,index:s,isInline:!1,renderNode:n},()=>p)}function u(i,s,c){const{markDef:p,markType:y,markKey:d}=i,f=e.marks[y]||e.unknownMark,h=i.children.map((_,G)=>n({node:_,index:G,isInline:!0}));return f===e.unknownMark&&t(me(y),{nodeType:"mark",type:y}),k(f,{key:c,text:q(i),value:p,markType:y,markKey:d,renderNode:n},()=>h)}function a(i,s,c,p){const{_key:y,children:d,...f}=U({node:i,index:s,isInline:p,renderNode:n}),h=f.node.style||"normal",_=(typeof e.block=="function"?e.block:e.block[h])||e.unknownBlockStyle;return _===e.unknownBlockStyle&&t(ke(h),{nodeType:"blockStyle",type:h}),k(_,{key:c,...f,value:f.node,renderNode:n},()=>d)}function b(i,s){if(i.text===`
`){const c=e.hardBreak;return c?k(c,{key:s}):`
`}return i.text}function v(i,s,c,p){const y={value:i,isInline:p,index:s,renderNode:n};t(V(i._type),{nodeType:"block",type:i._type});const d=e.unknownType;return k(d,{key:c,...y})}function g(i,s,c,p){const y={value:i,isInline:p,index:s,renderNode:n},d=e.types[i._type];return d?k(d,{key:c,...y}):void 0}return n};function U(e){const{node:t,index:n,isInline:r,renderNode:l}=e,o=ie(t).map((u,a)=>l({node:u,isInline:!0,index:a,renderNode:l}));return{_key:t._key||`block-${n}`,children:o,index:n,isInline:r,node:t}}const Se=H({__name:"vue-portable-text",props:{value:{},components:{},onMissingComponent:{type:[Function,Boolean],default:()=>ve},listNestingMode:{}},setup(e){function t(){}const n=e,r=()=>{const l=n.onMissingComponent||t,o=Array.isArray(n.value)?n.value:[n.value],u=se(o,n.listNestingMode||ce),a=n.components?ae(D,n.components):D,b=Ne(a,l);return u.map((v,g)=>b({node:v,index:g,isInline:!1,renderNode:b}))};return(l,o)=>(B(),C(r))}}),F={__name:"UluSanityRichText",props:{content:Array,noWrapper:{type:Boolean,default:!1}},setup(e){const t={types:{image:({value:n})=>k("img",{src:`${n.imageUrl}?max-w=1100&fit=crop`,alt:n.imageAlt})}};return(n,r)=>e.content?.length?(B(),C(Z,{key:0,class:"wysiwyg",unwrapped:e.noWrapper},{default:Q(()=>[X(Y(Se),{value:e.content,components:t},null,8,["value"])]),_:1},8,["unwrapped"])):J("",!0)}};F.__docgenInfo={exportName:"default",displayName:"UluSanityRichText",description:"",tags:{},props:[{name:"content",description:"The array of Portable Text blocks to render.",type:{name:"array"}},{name:"noWrapper",description:"If true, the output will not be wrapped in a div with the 'wysiwyg' class.",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],sourceFiles:["/Users/joescherben/Personal/Projects/ULU/frontend-vue/lib/components/utils/UluSanityRichText.vue"]};const We={component:F,tags:["autodocs"],argTypes:{content:{control:"object"},noWrapper:{control:"boolean"}}},z=[{_key:"r1",_type:"block",style:"h2",children:[{_key:"r1c1",_type:"span",text:"Hello, Sanity!"}]},{_key:"r2",_type:"block",children:[{_key:"r2c1",_type:"span",text:"This is a simple example of Portable Text being rendered by the "},{_key:"r2c2",_type:"span",text:"UluSanityRichText",marks:["strong"]},{_key:"r2c3",_type:"span",text:" component."}]}],O={args:{content:z,noWrapper:!1}},T={args:{content:z,noWrapper:!0}},N={args:{content:[]}};O.parameters={...O.parameters,docs:{...O.parameters?.docs,source:{originalSource:`{
  args: {
    content: mockContent,
    noWrapper: false
  }
}`,...O.parameters?.docs?.source}}};T.parameters={...T.parameters,docs:{...T.parameters?.docs,source:{originalSource:`{
  args: {
    content: mockContent,
    noWrapper: true
  }
}`,...T.parameters?.docs?.source}}};N.parameters={...N.parameters,docs:{...N.parameters?.docs,source:{originalSource:`{
  args: {
    content: []
  }
}`,...N.parameters?.docs?.source}}};const Ae=["WithWrapper","NoWrapper","Empty"];export{N as Empty,T as NoWrapper,O as WithWrapper,Ae as __namedExportsOrder,We as default};
