import{computed as c,watch as P}from"vue";import{useRoute as q,useRouter as I}from"vue-router";function N(f,p){const h=q(),m=I(),i=c(()=>{const e=parseInt(h.query.page||"1",10);return isNaN(e)||e<1?1:e}),n=c(()=>!f.value||f.value.length===0?1:Math.ceil(f.value.length/p));P(n,e=>{i.value>e&&m.push({query:{...h.query,page:e}})});const x=c(()=>{const e=(i.value-1)*p,t=e+p;return f.value.slice(e,t)}),g=c(()=>{if(n.value<=1)return null;const e={pages:{}},t=i.value,r=n.value,s=5,u=a=>({query:{...h.query,page:a}});t>1&&(e.first={href:u(1)},e.previous={href:u(t-1)}),t<r&&(e.next={href:u(t+1)},e.last={href:u(r)});let o,l;if(r<=s)o=1,l=r;else{const a=Math.floor(s/2),v=Math.ceil(s/2)-1;t<=a?(o=1,l=s):t+v>=r?(o=r-s+1,l=r):(o=t-a,l=t+v)}for(let a=o;a<=l;a++)e.pages[a]={href:u(a)};return e}),y=c(()=>{const e={previous:!1,next:!1};if(!g.value||!g.value.pages)return e;const t=Object.keys(g.value.pages).map(Number);if(t.length===0)return e;const r=Math.min(...t),s=Math.max(...t);return r>1&&(e.previous=!0),s<n.value&&(e.next=!0),e});return{currentPage:i,totalPages:n,paginatedItems:x,pagerItems:g,pagerEllipses:y}}export{N as u};
