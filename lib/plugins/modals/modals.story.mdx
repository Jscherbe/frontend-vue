import { Canvas } from '@storybook/addon-docs/blocks';
import * as ModalStories from '../../components/collapsible/UluModal.stories.js';

# Modals

Modals plugin allows configuring app-wide modals that are triggered by the global API. Register your modals when you install the plugin then interact with them using the global API.

## Registering your app-wide modals

Create the modal component file like:

```html
<template>
  <UluModal>
    User setting modalâ€¦
  </UluModal>
</template>
```


Example ./scr/modals.js

```js
import { defineAsyncComponent } from "vue";

export default [
  {
    name: "settings",
    component: defineAsyncComponent(() => import('./components/modals/UserSettingsModal.vue')),
  }
]
```

## Installing the plugin

Example ./src/main.js

```js
import UluModals from "@ulu/frontend-vue/plugins/modals/index.js";
import modals from "./src/modals.js";

//...

app.use(UluModals, { modals });

```

## Using Global API

```js

// Open a app-wide modal
this.$uluModals.open({ exampleProp: value });

// Close app-wide modal 
this.$uluModals.close();

// Add modals after post-install
this.$uluModals.add({
  name: "settings",
  component: defineAsyncComponent(() => import('./components/modals/UserSettingsModal.vue')),
});

// Remove a modal from the registry
this.$uluModals.remove("settings");

// Get Modal from registry (not usually needed)
const settingsModal = this.$uluModals.get("settings");
// console.log(settingsModal.name) ==> "settings"
```

## Using Composition API (via composable)

Composable is used get access to modals API (through inject)

```html

<template>
  <button @click="showSettingsModal">My Settings</button>
</template>

<script setup>
  import { useModals } from "./useModals";

  const modals = useModals();
  const showSettingsModal = () => {
    console.log("This is opening via uluModals composable");
    modals.open("settings");
  };
</script>

```

## Standalone Modal Component

The `UluModal` **component is independent of this plugin.** The plugin is simply a convenient way to manage global modals (for things like a settings dialog) that need to be opened from anywhere in your application.

You can use `UluModal` as the component that the plugin displays, or you can use it on its own for any case where you are managing the state locally within a component and don't need a global API.

Here is a demonstration of the standalone `UluModal` component:

<Canvas of={ModalStories.Default} />